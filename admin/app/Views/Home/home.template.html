{% extends "template.html" %}
{% set active_page = "home" %}
{% set section_name = "Dashboard" %}
{% set section_sub_name = "welcome"|trans %}
{% set section_icon_name = "dashboard" %}

{% block title %}Home{% endblock %}
{% block content %}
    <!-- Main content -->
    <section class="content">
    {% if flash.success is not null %}
        <div class="alert alert-success alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            {{flash.success|trans}}
        </div>
    {% endif %}
    <!-- <div class="form-group" style="width: 30%">
        <select class="form-control" id="frmDateId" name="frmDateId" onchange="return doFilter()" >
       
            <option value="month" {% if 'home' == filter.filterby %} selected="selected" {% endif %}>Current Month</option>
            <option value="year" {% if 'year' == filter.filterby %} selected="selected" {% endif %}>Current Year</option>
            <option value="all" {% if 'all' == filter.filterby%} selected="selected" {% endif %}>All</option>
        </select>
    </div> -->
      <!-- Small boxes (Stat box) -->
    <div class="row">
       <!--  <div class="col-lg-6 col-xs-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <i class="fa fa-users"></i>
                    <h3 class="box-title">{{ user_pending_count}} {{ "users"|trans }}</h3>
                    <div class="box-tools pull-right">
                        <a href="{{dirName_lang}}/users" class="btn btn-box-tool" style="font-size: initial;">{{"more_info"|trans}} <i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <div class="box-body">
                    <div id="donut-chart" style="height: 300px;"></div>
                </div>
            </div>
        </div> -->
        <!-- <div class="col-lg-6 col-xs-12">
            <div class="box box-primary">
                <div class="box-header with-border">
                    <i class="fa fa-users"></i>
                    <h3 class="box-title">{{ vagone_recipes_pending_count}} {{ "recipes"|trans }}</h3>
                    <div class="box-tools pull-right">
                        <a href="{{dirName_lang}}/recipes" class="btn btn-box-tool" style="font-size: initial;">{{"more_info"|trans}} <i class="fa fa-arrow-circle-right"></i></a>
                    </div>
                </div>
                <div class="box-body">
                    <div id="donutrecipes-chart" style="height: 300px;"></div>
                </div>
            </div>
        </div>  -->
        <!-- <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-green">
                <div class="inner">
                  <h3>{{ event_count}}</h3>
                  <p style="font-size:24px">Events</p>
                </div>
                <div class="icon">
                    <i class="ion ion-stats-bars"></i>
                </div>
                <a class="small-box-footer">{{"more_info"|trans}} <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div> -->
        <!-- <div class="col-lg-6 col-xs-6">
            <div class="small-box bg-yellow">
                <div class="inner">
                  <h3>{{ task_count}}</h3>
                  <p style="font-size:24px">Tasks</p>
                </div>
                <div class="icon">
                  <i class="ion ion-stats-bars"></i>
                </div>
                 <a class="small-box-footer">{{"more_info"|trans}} <i class="fa fa-arrow-circle-right"></i></a>
            </div>
        </div>      -->       
    </div>
    </section>
    <link rel="stylesheet" type="text/css" href="{{dirName}}/public/assets/css/pagination/plugin.css" />
{% endblock %}

{% block scripts %}
<!-- /*<script>
  $(function () {
    /*
     * DONUT CHART
     * -----------
     */

    var donutData = [
      {label: '{{ "users"|trans }}', data: {{ (user_pending_count - user_pending_fb_count) - user_pending_google_count }}, color: "#00a65a"},
      {label: '{{ "fb_users"|trans }}', data: {{ user_pending_fb_count }}, color: "#0073B7"},
      {label: '{{ "google_users"|trans }}', data: {{ user_pending_google_count }}, color: "#1A918F"}
    ];
    $.plot("#donut-chart", donutData, {
      series: {
        pie: {
          show: true,
          radius: 1,
          innerRadius: 0,
          label: {
            show: true,
            radius: 0.5, 
            formatter: labelFormatter,
            threshold: 0.1
          }

        }
      },
      legend: {
        show: false
      }
    });

    var donutDatarecipes = [
      {label: '{{ "vagone_users"|trans }}', data: {{ vagone_recipes_pending_count - users_recipes_pending_count }}, color: "#DD3937"},
      {label: '{{ "recipe_users"|trans }}', data: {{ users_recipes_pending_count }}, color: "#F5B43E"}
    ];
    $.plot("#donutrecipes-chart", donutDatarecipes, {
      series: {
        pie: {
          show: true,
          radius: 1,
          innerRadius: 0,
          label: {
            show: true,
            radius: 0.5, 
            formatter: labelFormatter,
            threshold: 0.1
          }

        }
      },
      legend: {
        show: false
      }
    });
    /*
     * END DONUT CHART
     */

    /*
     * Custom Label formatter
     * ---------------------- 
     */
    function labelFormatter(label, series) {
      return '<div style="font-size:15px; text-align:center; padding:2px; color: #FFF; font-weight: 700;max-width:160px;width:130px">'
          + label + "</br><span style='font-size:26px;'>" + series.data[0][1] + "</span> (" + Math.round(series.percent) + "%)</div>";
    }
});

function doFilter() {

    var filterby = $('#frmDateId').val();
    
    if(filterby == 'year') {
        $(location).attr('href', '{{dirName_lang}}/home?q='+filterby);
    } else if(filterby == 'all') {
        $(location).attr('href', '{{dirName_lang}}/home?q='+filterby);
    } else {
        $(location).attr('href', '{{dirName_lang}}/home');
    }

}
</script>*/ -->
{% endblock %}